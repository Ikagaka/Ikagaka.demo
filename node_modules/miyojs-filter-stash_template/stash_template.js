// Generated by CoffeeScript 1.8.0

/* (C) 2014 Narazaka : Licensed under The MIT License - http://narazaka.net/license/MIT?2014 */

/* base code: micro-template.js (https://github.com/cho45/micro-template.js) (c) cho45 http://cho45.github.com/mit-license */
var MiyoFilters;

if (typeof MiyoFilters === "undefined" || MiyoFilters === null) {
  MiyoFilters = {};
}

MiyoFilters.stash_template = {
  type: 'value-value',
  filter: function(value, request, id, stash) {
    var error, sub, sub_str, value_replace;
    value_replace = value = value.toString();
    try {
      sub_str = 'var _ret = "";\n' + 'try{\n' + "_ret += '" + value_replace.replace(/#\{/g, '\x11').replace(/\}/g, '\x13').replace(/\\/g, '\\\\').replace(/'/g, "\\'").replace(/\n/g, '').replace(/\x11(.+?)\x13/g, function(match, code) {
        return "' + (stash.stash_template['" + code + "']) + '";
      }) + "';\n" + 'return _ret;' + ("\n}catch(e){\nthrow 'stash_template runtime error:\\n' + e + '\\n' + 'id: ' + id + '\\n' + 'template:\\n--\\n" + (value.replace(/\\/g, '\\\\').replace(/'/g, "\\'").replace(/\r/g, "\\r").replace(/\n/g, "\\n")) + "\\n--\\n';\n}");
      sub = new Function('request', 'id', 'stash', sub_str);
    } catch (_error) {
      error = _error;
      throw 'stash_template compile error:\n' + error + '\n' + 'id: ' + id + '\n' + 'template:\n--\n' + sub_str + '\n--\n';
    }
    return sub.call(this, request, id, stash);
  }
};

if ((typeof module !== "undefined" && module !== null) && (module.exports != null)) {
  module.exports = MiyoFilters;
}

//# sourceMappingURL=stash_template.js.map
