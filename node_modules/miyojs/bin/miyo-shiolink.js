#!/usr/bin/env node
// Generated by CoffeeScript 1.8.0

/* (C) 2014 Narazaka : Licensed under The MIT License - http://narazaka.net/license/MIT?2014 */

(function() {
  var Miyo, ShiolinkJS, shiolink;

  ShiolinkJS = require('shiolinkjs');

  Miyo = require('../lib/miyo');

  shiolink = new ShiolinkJS(new Miyo(Miyo.DictionaryLoader.load_recursive(process.argv[2] != null ? process.argv[2] : '.')));

  process.stdin.resume();

  process.stdin.setEncoding('utf8');

  process.stdin.on('data', function(chunk) {
    return shiolink.add_chunk(chunk).then(function(res) {
      if (res.length) {
        return process.stdout.write(res);
      }
    });
  });

}).call(this);
