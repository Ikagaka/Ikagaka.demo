entry_template - エントリ呼び出しテンプレート
========================================

これはなにか
----------------------------------------

これは伺か用SHIORIサブシステムである美代(Miyo)の辞書フィルタプラグインです。

エントリ呼び出しを手軽に行えるテンプレートを提供します。

インストール
----------------------------------------

### 一般

    npm install miyojs-filter-entry_template

### ゴーストに追加する場合

ghost/masterをカレントディレクトリとして同様に

    npm install miyojs-filter-entry_template

含まれるフィルタ
----------------------------------------

### entry_template

テンプレートを処理するフィルタです。

argumentをvalueとして扱い、テンプレートを処理した後のvalueを返します。

通常Valueフィルタとして使います。

依存
----------------------------------------

このフィルタが依存するものはありません。

使用方法
----------------------------------------

Valueフィルタとして使用する場合は、以下のようにvalue_filtersに登録します。

    _load:
    	filters: [..., append_value_filters, ...]
    	argument:
    		append_value_filters:
    			- entry_template

これで全てのValueを返すエントリの結果はテンプレート処理されます。

また単体で逐一使いたい場合はMiyoのYAML辞書ファイルのエントリにフィルタを追加します。

Valueを返すフィルタの後に指定する必要があります。

    OnAITalk:
    	filters: [value, entry_template]
    	argument:
    		value: \h\s[0]あああ${OnTest}\e

テンプレート
----------------------------------------

このフィルタを通った文字列は以下の置換を施されます。

### ${...}

${hoge}はエントリhogeをcall_entry()します。

例えば以下の場合

    OnTest: ${場所}に逝った。
    場所:
    	- 国会議事堂
    	- 本能寺
    	- ${店} ${店の場所}店
    店:
    	- 吉野家
    	- ハミングマート
    店の場所:
    	- 光台
    	- にせ○るな

Valueフィルタとしてentry_templateを使っている場合どのエントリにもテンプレートが適用されるので、OnTestエントリの出力結果は「国会議事堂に逝った。」や「吉野家 にせ○るな店に逝った。」等となります。
