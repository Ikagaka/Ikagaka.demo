(function(global){
'use strict';(function(b){function c(){this.c={}}function a(a){return b.Event?new b.Event(a):{type:a,target:null,currentTarget:null,bubbles:!1,cancelable:!1,defaultPrevented:!1,eventPhase:0,timeStamp:Date.now()}}c.prototype={constructor:c,register:function(){return this},list:function(a){return this.has(a)?this.c[a]:[]},has:function(a){return a in this.c},on:function(a,c,d){this.has(c)?this.c[c].push(d):this.c[c]=[d];a&&a.addEventListener(c,d,!1);return this},off:function(a,c,d){if(this.has(c)){var b=
this.c[c].indexOf(d);0<=b&&(this.c[c].splice(b,1),this.c[c].length||delete this.c[c])}a&&a.removeEventListener(c,d,!1);return this},fire:function(c,g){c&&c.dispatchEvent?c.dispatchEvent(a(g)):this.has(g)&&this.c[g].forEach(function(c){c(a(g))})},clear:function(a){for(var c in this.c)for(var d=this.c[c],b=0,h=d.length;b<h;++b)a&&a.removeEventListener(c,d[b],!1);this.c={};return this}};"process"in b&&(module.exports=c);b["WMEvent"in b?"WMEvent_":"WMEvent"]=c})((this||0).self||global);
(function(b){function c(){}"process"in b&&(module.exports=c);b["DataType"in b?"DataType_":"DataType"]=c})((this||0).self||global);
(function(b){b["DataType_"in b?"DataType_":"DataType"].Array={toString:function(c){if(!c)return"";var a=[],e=0,b=c.length;if(32E3>b)return String.fromCharCode.apply(null,c);for(;e<b;e+=32E3)a.push(String.fromCharCode.apply(null,c.slice(e,e+32E3)));return a.join("")},fromString:function(c,a){for(var e=0,b=c.length,d=Array(b),f=Math.pow(256,a||1)-1;e<b;++e)d[e]=c.charCodeAt(e)&f;return d},clampValue:function(c,a){for(var e=0,b=c.length,d=0,f=Math.pow(256,a||1)-1;e<b;++e)d=c[e],c[e]=0>d?0:d>f?f:d;return c},
toHexStringArray:function(c,a,e){var b=[],d=0,f=c.length;e=-(2*(e||1));if(a)for(a=/\w/;d<f;++d){var h=String.fromCharCode(c[d]);a.test(h)?b.push(h):b.push("%"+(c[d]+4294967296).toString(16).slice(e))}else for(;d<f;++d)b.push((c[d]+4294967296).toString(16).slice(e));return b}}})((this||0).self||global);
(function(b){b["DataType_"in b?"DataType_":"DataType"].Uint8Array={clone:function(c,a,b){return void 0!==b?new Uint8Array(c.buffer.slice(a,b)):new Uint8Array(c.buffer.slice(a||0))},concat:function(){for(var c=arguments,a=0,b=c.length,g=0,d=0;a<b;++a)g+=c[a].length;g=new Uint8Array(g);for(a=0;a<b;++a)g.set(c[a],d),d+=c[a].length;return g},expand:function(c,a){var b=new Uint8Array(c.length*(a||2)|0);b.set(c);return b},toArray:function(c){return Array.prototype.slice.call(c)},toString:function(c){var a=
[],b=0,g=c.length;if(32E3>g)return String.fromCharCode.apply(null,c);for(;b<g;b+=32E3)a.push(String.fromCharCode.apply(null,c.subarray(b,b+32E3)));return a.join("")},fromString:function(c){for(var a=0,b=c.length,g=new Uint8Array(b);a<b;++a)g[a]=c.charCodeAt(a)&255;return g}}})((this||0).self||global);
(function(b){function c(a,e,g,d){if(e&&d>e)throw new TypeError("DataCloneError: "+a);if(null===a||void 0===a)return a;var f=Object.prototype.toString.call(a).split(" ")[1].slice(0,-1);switch(f){case "Function":return a;case "String":case "Number":case "Boolean":return a.valueOf();case "RegExp":return RegExp(a.source,(a+"").slice(a.source.length+2));case "Date":return new Date(+a);case "Array":f=[];f.length=a.length;for(var h=0,k=a.length;h<k;++h)h in a&&(f[h]=c(a[h],e,g,d+1));return f;case "Object":for(var f=
{},h=Object.keys(a),k=0,l=h.length;k<l;++k){var p=h[k];f[p]=c(a[p],e,g,d+1)}return f;case "Error":return new a.constructor(a.message);case "Uint8ClampedArray":case "Uint8Array":case "Uint16Array":case "Uint32Array":case "Int8Array":case "Int16Array":case "Int32Array":case "Float32Array":case "Float64Array":return new b[f](a.buffer.slice(0))}if(a.nodeType)a=a.cloneNode(!0);else if(a instanceof b.NamedNodeMap){e={};for(g=0;d=a[g++];)e[d.name]=d.value;a=e}else if(a instanceof b.CSSStyleDeclaration){e=
{};f=0;for(h=a.length;f<h;++f)g=a.item(f),(d=a[g])&&"string"===typeof d&&(e[g]=d);a=e}else if("length"in a&&"function"===typeof a.item){f=[];h=0;for(k=a.length;h<k;++h)f[h]=c(a[h],e,g,d+1);a=f}else a=g?g(a,e,g,d):a;return a}b["DataType_"in b?"DataType_":"DataType"].Object={clone:function(a,b,g){return c(a,b||0,g,0)}}})((this||0).self||global);
(function(b){function c(a){return c.parse(a)}function a(a){return e(a,!1)||{href:a}}function e(a,c){var b=u.exec(a);return b?c&&!g(b[3])?null:d({href:a,protocol:b[1]||"",hostname:b[2]||"",port:"",pathname:b[3]||"",search:b[4]||"",hash:b[5]||""},["",""]):(b=s.exec(a))?c&&(/[^A-Za-z0-9\+\-\.\:]/.test(b[1])||/^[0-9]/.test(b[1])||/[^\:]$/.test(b[1])||!g(b[5]||""))?null:d({href:a,protocol:b[1],hostname:b[3],port:b[4]?b[4]:p[b[1]]||"",pathname:b[5]||"",search:b[6]||"",hash:b[7]||""},(b[2]||":").split(":")):
(b=x.exec(a))?c&&!g(b[1])?null:d({href:a,protocol:"",hostname:"",port:"",pathname:b[1]||"",search:b[2]||"",hash:b[3]||""},["",""]):null}function g(a){return a&&(/\/\//.test(a)||/[^\/\w\-\.\~\%\!\$\&\'\(\)\*\+,;\=\:@]/.test(a))?!1:!0}function d(a,b){var c=a.port?a.hostname+":"+a.port:a.hostname;a.origin=a.protocol?a.protocol+"//"+c:c;a.host=c;a.username=b[0];a.password=b[1];var d=a.pathname.split("/"),c=d.pop(),d=d.join("/");a.scheme=a.protocol;a.path=a.pathname+a.search;a.dir=d;a.file=c;a.fragment=
a.hash;return a}function f(a){var b=a.protocol||a.sceheme||"",c=a.username||"",d=a.password||"",e=a.hostname||"",g=a.pathname||"/",f=a.port||"",h=a.search||"",k=a.hash||a.fragment||"",l="",m="";b&&(l="//",e||(l+="/"));a.auth?m=a.auth+"@":c&&d&&(m=c+":"+d+"@");b&&p[b]!==f||(f="");return[b,l,m,e,f?":"+f:f,g,h,k].join("")}function h(b){b=a(b);var c=b.dir.split("/").reduce(function(a,b){".."===b?(a.pop(),a.length||a.unshift("/")):/^\.+$/.test(b)||a.push(b);return a},[]).join("/");b.pathname=(c+"/").replace(/\/+/g,
"/")+b.file;return f(b)}function k(a){return/^(https?|wss?):/.test(a)?s.test(a):u.test(a)}var l="document"in b,p={"http:":"80","https:":"443","ws:":"81","wss:":"816"},s=/^([\w\+\-\.]+:)\/\/(?:(?:([\w:]+)@)?([^\/:]+)(?::(\d*))?)([^ :?#]*)(?:(\?[^#]*))?(?:(#.*))?$/,u=/^(file:)\/\/(localhost)?([^ ?#]*)(?:(\?[^#]*))?(?:(#.*))?$/i,x=/^([^ ?#]*)(?:(\?[^#]*))?(?:(#.*))?$/,m=+(""+Date.now()).slice(-4),y=l?location.href.slice(0,location.href.lastIndexOf("/")):"";c.isValid=function(a){a=Array.isArray(a)?a:
[a];for(var b=0,c=a.length;b<c;++b)if(!e(a[b],!0))return!1;return!0};c.parse=a;c.build=f;c.match=function(b,c){var d=a(b).path.replace(/^\.\//,""),e=a(c).path.replace(/^\.\//,""),d=d.replace(/\./g,function(){return"\\."}).replace(/\*\*/g,function(){return"[-\\w\\.%()\\/]+"}).replace(/\*/g,function(){return"[-\\w\\.%()]+"});return RegExp("^"+d+"$").test(e)};c.resolve=function(a,b){return k(a)?a:b?h(b+"/"+a):l?h(y+"/"+a):a};c.normalize=h;c.isAbsolute=k;c.isRelative=function(a){return s.test("http://example.com/"+
a.replace(/^\/+/,""))};c.buildQuery=function(a,c){c=c||"&";var d=[],e;for(e in a){var g=b.encodeURIComponent(e),f=a[e];Array.isArray(f)||(f=[f]);for(var h=[],k=0,l=f.length;k<l;++k)h.push(g+"="+b.encodeURIComponent(f[k]));d.push(h.join(c))}return d.join(c)};c.parseQuery=function(a){var c={};0<=a.indexOf("?")&&(a=a.split("?")[1].split("#")[0]);a.replace(/&amp;|&|;/g,";").replace(/(?:([^\=]+)\=([^\;]+);?)/g,function(a,d,e){a=b.encodeURIComponent(d);e=b.encodeURIComponent(e);c[a]?Array.isArray(c[a])?
c[a].push(e):c[a]=[c[a],e]:c[a]=e;return""});return c};c.addCacheBustingKeyword=function(a,b){b=(b||"t")+"=";if(0<=a.indexOf("#")){var c=e(a);c.search=c.search.length?c.search+("&"+b+ ++m):c.search+("?"+b+ ++m);a=f(c)}else a=0<=a.indexOf("?")?a+("&"+b+ ++m):a+("?"+b+ ++m);return a};"process"in b&&(module.exports=c);b["WMURL"in b?"WMURL_":"WMURL"]=c})((this||0).self||global);
(function(b){function c(){this.d=(new K).register(M);this.a=null;this.b=q;b.XMLHttpRequest?(this.b=v,this.a=new XMLHttpRequest,"onload"in this.a&&"responseType"in this.a&&"withCredentials"in this.a&&(this.b=r)):this.a={readyState:w,method:"",url:"",async:!0,auth:"",requestHeader:{},response:null,responseText:"",responseXML:null,responseHeaders:{},status:0,statusText:"",upload:null,withCredentials:!1};this.f="";this.e=w;Object.defineProperties(this,{readyState:{get:a},response:{get:e},responseText:{get:g},
responseType:{get:d,set:f},responseXML:{get:h},status:{get:k},statusText:{get:l},upload:{get:p,set:s},withCredentials:{get:u,set:x}})}function a(){return this.a.readyState}function e(){return this.a.response}function g(){return this.a.responseText}function d(){return this.a.responseType}function f(a){if(G(a))this.a.responseType=a;else throw new TypeError("Unsupported responseType: "+a);}function h(){return this.a.responseXML}function k(){return this.a.status}function l(){return this.a.statusText}
function p(){return this.a.upload||null}function s(a){this.a.upload=a}function u(){return this.a.withCredentials||!1}function x(a){this.a.withCredentials=a}function m(a,b){N.get(b,function(b){b.setEncoding("utf8");a.handleEvent();a.a.readyState=z;a.a.responseHeaders=b.headers;a.a.status=b.statusCode;a.handleEvent();a.a.readyState=A;a.handleEvent();b.on("data",function(b){a.a.responseText+=b;a.handleEvent()});b.on("end",function(){a.a.readyState=t;a.handleEvent()})}).on("error",function(b){a.a.readyState=
t;a.a.statusText=b.message;a.a.status=400;a.handleEvent();n(a,"error")})}function y(a,b){function c(b){a.a.readyState=t;a.a.status=b||400;a.handleEvent();n(a,"error")}E.existsSync(b)?E.readFile(b,{encoding:"utf8"},function(b,d){b?c(400):(a.handleEvent(),a.a.readyState=z,a.a.responseHeaders={},a.a.status=200,a.handleEvent(),a.a.readyState=A,a.handleEvent(),a.a.responseText=d,a.a.readyState=t,a.handleEvent())}):c(404)}function B(a,b){this.d.on(this.b===r?this.a:null,a,b);return this}function C(a,b){this.d.off(this.b===
r?this.a:null,a,b);return this}function n(a,b,c){c=c||{type:b};a.d.has(b)&&a.d.list(b).forEach(function(b){b.call(a.a,c)})}function F(a,b){switch(b){case "json":return JSON.parse(a);case "document":var c;I?(c=document.createElement("body"),c.innerHTML=a):c=a;return c;case "arraybuffer":case "blob":return L.Array.fromString(a)}return a}function D(a,b){var c=200<=a&&300>a;return b?0===a||c:c}function G(a){switch(a){case "arraybuffer":return!!b.ArrayBuffer;case "blob":return!!b.Blob;case "document":return!!b.HTMLDocument;
case "text":return!0;case "json":return!0}return!1}var H="process"in b,I="document"in b,J=b.WMURL||require("uupaa.wmurl.js"),K=b.WMEvent||require("uupaa.wmevent.js"),L=b.DataType||require("uupaa.datatype.js");if(H)var N=require("http"),E=require("fs");var w=0,z=2,A=3,t=4,q=0,v=1,r=2,M="loadstart load loadend progress readystatechange error timeout".split(" ");c.get=function(a,b,d){d=d||{};d=d.responseType||"text";var e=new c;e.on("load",function(){D(this.status,/^file\:/.test(a))?b.call(this,null,
this.response||this.responseText):b.call(this,Error(this.status),"")});d&&"text"!==d&&(e.responseType=d);e.open("GET",a);e.send()};c.prototype={constructor:c,getAllResponseHeaders:function(){if(this.b>q)return this.a.getAllResponseHeaders();var a=this.a.responseHeaders;return Object.keys(a).map(function(b){return b+":"+a[b]}).join("\n")},getResponseHeader:function(a){return this.b>q?this.a.getResponseHeader(a):this.a.responseHeaders[a]},open:function(a,b,c,d,e){c=void 0===c?!0:c;this.f=b;this.e=w;
switch(this.b){case q:this.a.method=a;this.a.url=b;this.a.async=c;this.a.auth=d&&e?d+":"+e:"";this.a.readyState===w&&(this.a.status=0,this.a.responseText="",n(this,"readystatechange"),this.a.readyState=1);break;case v:this.a.addEventListener("readystatechange",this);this.a.open(a,b,c,d,e);break;case r:this.a.open(a,b,c,d,e)}},overrideMimeType:function(a){this.b>q&&this.a.overrideMimeType(a)},send:function(a){switch(this.b){case q:a=J.parse(this.a.url);var b=a.username||"",c=a.password||"",b={host:a.hostname,
port:a.port||80,path:a.path,g:this.a.auth||(b&&c?b+":"+c:"")||"",h:this.a.method,headers:this.a.requestHeader};a.host?m(this,b):y(this,a.pathname);break;case v:/arraybuffer|blob/.test(this.a.responseType)&&this.a.overrideMimeType("text/plain; charset=x-user-defined");this.a.send(a);break;case r:this.a.send(a)}},setRequestHeader:function(a,b){this.b===q?this.a.requestHeader[a.toLowerCase()]=b:this.a.setRequestHeader(a,b)},addEventListener:B,removeEventListener:C,on:B,off:C,clear:function(){this.d.clear(this.b===
r?this.a:null);return this},abort:function(){this.a.abort()},getLevel:function(){return this.b},handleEvent:function(a){var b=this.a,c=b.status,d=b.readyState;this.e!==d&&(this.e=d,n(this,"readystatechange",a));switch(d){case 1:n(this,"loadstart",a);break;case z:n(this,"progress",a);break;case A:n(this,"progress",a);break;case t:if(D(c,/^file\:/.test(this.f))){try{b.response=F(b.responseText,b.responseType)}catch(e){}n(this,"load",a)}n(this,"loadend",a);this.b===v&&b.removeEventListener("readystatechange",
this)}}};"process"in b&&(module.exports=c);b["XHRProxy"in b?"XHRProxy_":"XHRProxy"]=c})((this||0).self||global);
})((this||0).self||global);
